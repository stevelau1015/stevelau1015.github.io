<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://stevelau1015.github.io</id>
    <title>Gridea</title>
    <updated>2021-04-06T11:22:37.364Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://stevelau1015.github.io"/>
    <link rel="self" href="https://stevelau1015.github.io/atom.xml"/>
    <subtitle>温故而知新</subtitle>
    <logo>https://stevelau1015.github.io/images/avatar.png</logo>
    <icon>https://stevelau1015.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, Gridea</rights>
    <entry>
        <title type="html"><![CDATA[树莓派内核编译]]></title>
        <id>https://stevelau1015.github.io/post/shu-mei-pai-nei-he-bian-yi/</id>
        <link href="https://stevelau1015.github.io/post/shu-mei-pai-nei-he-bian-yi/">
        </link>
        <updated>2021-04-06T05:51:10.000Z</updated>
        <content type="html"><![CDATA[<p>最近在系统地学习嵌入式，把这篇之前写过的文档先update上来</p>
<h2 id="为什么要使用内核编译">为什么要使用内核编译</h2>
<p>在编译链接同等规模的代码时，PC机所用的时间应少于树莓派所用时间，通过交叉编译的方法能提高速度。</p>
<h3 id="建立交叉编译环境">建立交叉编译环境</h3>
<p>建立交叉编译环境就是在PC机上安装能够编译树莓派软件的工具链，进行树莓派软件的编译。</p>
<p>工作分为两步，下载交叉编译器和设置环境变量。</p>
<h4 id="1下载安装树莓派交叉编译器">1.下载安装树莓派交叉编译器</h4>
<p>首先下载必要的软件和工具</p>
<pre><code class="language-bash">sudo apt-get install build-essential git
</code></pre>
   <img src="C:\Users\leon lau\AppData\Roaming\Typora\typora-user-images\image-20210325225235255.png" alt="1.1下载必要的工具" style="zoom:67%;" />
<center>图1.1 下载git相关工具并解压</center>
<pre><code class="language-bash">#在home路径下建立一个文件夹取名为rpi
mkdir rpi
#进入该目录并执行clone操作
cd rpi
git clone git://github.com/raspberrypi/tools.git
#进入tools下的arm-bcm2708子目录，交叉编译器在此目录下。
cd ~/rpi/tools/arm-bcm2708/
#64位系统使用的工具所在文件夹为 
$(gcc-linaro-arm-linux-gnueabihf-raspbian-x64)
</code></pre>
<img src="C:\Users\leon lau\AppData\Roaming\Typora\typora-user-images\image-20210325230622364.png" alt="image-20210325230622364"  />
<center>图1.2 建立目录并找到交叉编译器所在位置</center>
<h4 id="2设置环境变量">2.设置环境变量</h4>
<p>在<code>/.bashrc</code>文件中加入<code>gcc</code>交叉工具链目录。</p>
<pre><code class="language-bash">sudo nano ~/.bashrc
</code></pre>
<p>打开一个隐藏文件，在该文件最后一行加入交叉工具链所在目录。</p>
<pre><code class="language-bash">export PATH=$PATH:$HOME/rpi/tools/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian-x64/bin
</code></pre>
<p>请注意<code>~</code>符号表示<code>HOME</code>路径，<code>.bashrc</code>为隐藏文件。注意<code>PATH</code>代表环境变量，<code>:</code>冒号代表追加。<code>x</code>是小写的。</p>
<p>![image-20210325233216305](C:\Users\leon lau\AppData\Roaming\Typora\typora-user-images\image-20210325233216305.png)</p>
<center>图2.1 加入交叉工具链所在目录</center>
<p><code>Ctrl-O</code>保存并退出文件，接着执行以下指令以便立即更新当前控制台所包含的环境变量。</p>
<pre><code class="language-bash">source .bashrc
</code></pre>
<p>![image-20210325231723275](C:\Users\leon lau\AppData\Roaming\Typora\typora-user-images\image-20210325231723275.png)</p>
<center>图2.2 执行命令更新环境变量</center>
<p>为了测试交叉工具链是否安装成功，可在控制台中输入：</p>
<pre><code class="language-bash">arm-linux-gnueabihf-gcc -v
</code></pre>
<p>得到下图，证明交叉工具链安装成功。</p>
<p>![image-20210325233013224](C:\Users\leon lau\AppData\Roaming\Typora\typora-user-images\image-20210325233013224.png)</p>
<center>图2.3 验证交叉工具链是否安装成功</center>
]]></content>
    </entry>
</feed>